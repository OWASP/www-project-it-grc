<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <!-- View Form Dashboard -->
    <record model="ir.ui.view" id="backend_dashboard_zt_form">
      <field name="name">backend.dashboard.zt.form</field>
      <field name="model">backend.dashboard.zt</field>
      <field name="arch" type="xml">
        <form string="ZT dashboard">
          <sheet>
            <div class="oe_button_box" name="button_box">            
              <widget name="web_ribbon" text="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
              <button name="get_dashboard" type="object" string="Dashboard" class="oe_stat_button" icon="fa-play"/>
            </div>
            <group>
              <group name="group_1">
                <field name="name" required="1"/>
                <field name="active" invisible="1"></field>
                <field name="user_id" options="{'no_create': True, 'no_open': True}"/>
                <field name="zerotrust_enable" invisible="1"/>
                <field name="url" attrs="{'invisible': [('zerotrust_enable','=',True)], 'required':[('zerotrust_enable','=',False)]}"/>
                <field name="url_zt" attrs="{'invisible': [('zerotrust_enable','=',False)], 'required':[('zerotrust_enable','=',True)]}"/>
                <field name="height"/>
                <field name="width"/>
                <field name="main_dashboard"/>
                <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}"/>
              </group>
            </group>
            <group name="comment">
              <field name="comment"/>
            </group>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers"/>
            <field name="message_ids" widget="mail_thread"/>
          </div>
        </form>
      </field>
    </record>

    <!-- View Tree Dashboard -->
    <record model="ir.ui.view" id="backend_dashboard_zt_tree">
      <field name="name">backend.dashboard.zt.tree</field>
      <field name="model">backend.dashboard.zt</field>
      <field name="arch" type="xml">
        <tree string="ZT dashboard">
          <field name="sequence" widget="handle"/>
          <field name="name"/>
          <field name="url"/>
          <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}"/>
          <field name="main_dashboard"/>
          <field name="active"/>
        </tree>
      </field>
    </record>

    <!-- View Kanban Dashboard -->
    <record id="backend_dashboard_zt_kanban_admin" model="ir.ui.view">
      <field name="name">backend.dashboard.zt.kanban.admin</field>
      <field name="model">backend.dashboard.zt</field>
      <field name="priority" eval="1"/>
      <field name="arch" type="xml">
        <kanban class="o_kanban_mobile" quick_create_view="False" archivable="false">
          <field name="color"/>
          <field name="tag_ids"/>
          <field name="main_dashboard"/>
          <templates>
            <t t-name="kanban-box">
              <div t-attf-class="#{kanban_color(record.color.raw_value)} oe_kanban_global_click">
                <div class="o_dropdown_kanban dropdown">
                  <a class="dropdown-toggle o-no-caret btn" role="button" data-toggle="dropdown" href="#" aria-label="Dropdown menu" title="Dropdown menu">
                    <span class="fa fa-ellipsis-v"/>
                  </a>
                  <div class="dropdown-menu" role="menu">
                      <ul class="oe_kanban_colorpicker" data-field="color"/>
                  </div>
                </div>
                <div class="oe_kanban_content">
                  <div class="o_kanban_record_top mb16">
                    <div class="o_kanban_record_headings mt4">
                      <strong class="o_kanban_record_title">
                        <span style="font-weight:bold;">
                          <field name="name"/>
                        </span>
                        <br></br>
                      </strong>
                      <span class="o_kanban_record_subtitle">
                        <span>
                          <field name="comment"/><br/><br/>
                          <button name="get_dashboard" type="object" string="View Dashboard" class="btn btn-primary"/>
                        </span>
                      </span>
                    </div>
                  </div>
                  <t t-if="record.main_dashboard.raw_value">
                    <div>
                      <span class="o_kanban_record_subtitle">
                        <span>
                          <i class="fa fa-check" role="img" title="Main"/>
                          Main Dashboard
                        </span>
                      </span>
                    </div>
                  </t>
                  <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}"/>
                </div>
                <div class="oe_clear"></div>
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

    <record id="backend_dashboard_zt_kanban_user" model="ir.ui.view">
      <field name="name">backend.dashboard.zt.kanban.user</field>
      <field name="model">backend.dashboard.zt</field>
      <field name="priority" eval="1"/>
      <field name="arch" type="xml">
        <kanban class="o_kanban_mobile" quick_create_view="False" archivable="false">
          <field name="color"/>
          <field name="tag_ids"/>
          <field name="main_dashboard"/>
          <templates>
            <t t-name="kanban-box">
              <div t-attf-class="#{kanban_color(record.color.raw_value)} oe_kanban_global_click">
                <div class="o_dropdown_kanban dropdown">
                  <a class="dropdown-toggle o-no-caret btn" role="button" data-toggle="dropdown" href="#" aria-label="Dropdown menu" title="Dropdown menu">
                    <span class="fa fa-ellipsis-v"/>
                  </a>
                  <div class="dropdown-menu" role="menu">
                    <ul class="oe_kanban_colorpicker" data-field="color"/>
                  </div>
                </div>
                <div class="oe_kanban_content">
                  <div class="o_kanban_record_top mb16">
                    <div class="o_kanban_record_headings mt4">
                      <strong class="o_kanban_record_title">
                        <span style="font-weight:bold;">
                          <field name="name"/>
                        </span>
                        <br></br>
                      </strong>
                      <span class="o_kanban_record_subtitle">
                        <span>
                          <field name="comment"/><br/><br/>
                          <button name="get_dashboard" type="object" string="View Dashboard" class="btn btn-primary"/>
                        </span>
                      </span>
                    </div>
                  </div>
                  <t t-if="record.main_dashboard.raw_value">
                    <div>
                      <span class="o_kanban_record_subtitle">
                        <span>
                          <i class="fa fa-check" role="img" title="Main"/>
                          Main Dashboard
                        </span>
                      </span>
                    </div>
                  </t>
                  <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}"/>
                </div>
                <div class="oe_clear"></div>
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

    <!-- View Search Dashboard -->
    <record id="backend_dashboard_zt_search" model="ir.ui.view">
      <field name="name">backend.dashboard.zt.search</field>
      <field name="model">backend.dashboard.zt</field>
      <field name="arch" type="xml">
        <search string="ZT dashboard">
          <field name="name"/>
          <field name="user_id"/>
          <field name="tag_ids"/>
          <separator/>
          <filter string="Active" domain="[('active', '=', True)]" name="active"/>
          <filter string="Main Dashboard" name="main_dashboard"
                  domain="[('main_dashboard', '=', True)]"/>
          <separator/>
          <group expand='0' string='Group by...'>
            <filter string='User' name='partner' domain="[]" context="{'group_by': 'user_id'}"/>
            <filter string='Active' name='active' domain="[]" context="{'group_by': 'active'}"/>
          </group>
        </search>
      </field>
    </record>

    <!--ZEROTRUST SETTING -->
    <record model="ir.ui.view" id="zerotrust_settings_zt_form">
      <field name="name">zerotrust.settings.zt.form</field>
      <field name="model">zerotrust.settings.zt</field>
      <field name="arch" type="xml">
        <form string="ZTrust Settings">
          <sheet>
            <group>
              <group>
                <button type="object" name="zt_enable" class="btn btn-success fa fa-thumbs-o-up"/>
                <button type="object" name="zt_disable" class="btn btn-danger fa fa-thumbs-o-down"/>
              </group>
              <group>
                <h2><field name="is_zerotrust" invisible="0"/></h2>
                <div attrs="{'invisible': [('is_zerotrust','=',False)]}"><h2><span style="color:green;">ZTRUST</span></h2></div>
                <div attrs="{'invisible': [('is_zerotrust','=',True)]}"><h2><span style="color:red;">ZTRUST</span></h2></div>
              </group>
            </group>
            
          </sheet>
          <footer></footer>
        </form>
      </field>
    </record>
    <record id="action_zerotrust_settings_zt_manager" model="ir.actions.act_window">
      <field name="name">ZTrust Settings</field>
      <field name="res_model">zerotrust.settings.zt</field>
      <field name="view_mode">form</field>
      <field name="target">new</field>
      <field name="groups_id" eval="[(4, ref('grcbit_zt.group_dashboard_manager_zt'))]"/>
    </record>

    <!--Action backend Dashboard-->
    <record id="action_backend_dashboard_zt_manager" model="ir.actions.act_window">
      <field name="name">ZT Dashboard</field>
      <field name="res_model">backend.dashboard.zt</field>
      <field name="view_mode">kanban,tree,form</field>
      <field name="groups_id" eval="[(4, ref('grcbit_zt.group_dashboard_manager_zt'))]"/>
      <field name="view_ids"
        eval="[(5, 0, 0),
              (0, 0, {'view_mode': 'kanban', 'view_id': ref('backend_dashboard_zt_kanban_admin')}),
              (0, 0, {'view_mode': 'tree', 'view_id': ref('backend_dashboard_zt_tree')}),
              (0, 0, {'view_mode': 'form', 'view_id': ref('backend_dashboard_zt_form')})]"/>
    </record>

    <record id="action_backend_dashboard_zt_user" model="ir.actions.act_window">
      <field name="name">ZT Dashboard</field>
      <field name="res_model">backend.dashboard.zt</field>
      <field name="view_mode">kanban</field>
      <field name="groups_id" eval="[(4, ref('grcbit_zt.group_dashboard_user_zt'), ref('grcbit_zt.group_dashboard_guest_zt'))]"/>
      <field name="view_id" ref="backend_dashboard_zt_kanban_user"/>
    </record>

    <!-- menu Iframe -->
    <menuitem 
      name="ZT" 
      id="zt_menu_main_root" 
      sequence="2" 
      groups="grcbit_zt.group_dashboard_manager_zt,grcbit_zt.group_dashboard_user_zt,grcbit_zt.group_dashboard_guest_zt"/>

    <menuitem name="ZT" id="backend_dashboard_menu_iframe_zt" sequence="1"
      parent="zt_menu_main_root"  groups="grcbit_zt.group_dashboard_guest_zt,grcbit_zt.group_dashboard_user_zt,grcbit_zt.group_dashboard_manager_zt"/>

    <menuitem name="ZT" id="backend_dashboard_menu_iframe_item1_admin_zt" sequence="3"
      parent="backend_dashboard_menu_iframe_zt"
      groups="grcbit_zt.group_dashboard_manager_zt"
      action="action_backend_dashboard_zt_manager"/>

    <menuitem name="ZT" id="backend_dashboard_menu_iframe_item1_user_zt" sequence="3"
      parent="backend_dashboard_menu_iframe_zt"
      groups="grcbit_zt.group_dashboard_user_zt,grcbit_zt.group_dashboard_guest_zt"
      action="action_backend_dashboard_zt_user"/>

    <menuitem name="ZT Settings" id="zerotrust_settings_zt_menu_iframe_item1_admin" sequence="4"
      parent="backend_dashboard_menu_iframe_zt"
      groups="base.group_system"
      action="action_zerotrust_settings_zt_manager"/>


    <!-- menu Main Dashboard -->
    <record model="ir.actions.client" id="modules_act_dashboard_zt">
      <field name="name">Dashboard</field>
      <field name="tag">view_dashboard_zt</field>
      <field name="params" eval="{'main_dashboard': True}"/>
    </record>
    <menuitem id="module_dashboard_mi_zt" parent="backend_dashboard_menu_iframe_zt" sequence="1"
      action="modules_act_dashboard_zt"/>

    </data>
</odoo>
